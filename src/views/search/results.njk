{% extends "layout.njk" %}

{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/pagination/macro.njk" import govukPagination %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "macros/search/search-form.njk" import searchForm %}
{% from "macros/search/search-results.njk" import searchResults %}

{% block pageTitle %}
  {%if errorList %}Error: {%endif%}{{ headingTitle }} - {{ serviceName }} - GOV.UK
{% endblock %}

{% block beforeContent %}
  {{ super() }}
  {% if errorList %}
    {{govukErrorSummary ({
      "titleText": "There is a problem",
      "errorList": errorList,
      "classes": "govuk-!-margin-top-4 govuk-!-margin-bottom-2"
    }) }}
  {% endif %}

  <nav>
    <a id="back-link" href="/search" class="govuk-back-link">Back</a>
  </nav>
{% endblock %}

{% set mainClasses = "govuk-!-padding-top-2 mpdp-overflow-wrap" %}

{% block content %}
  {% if total > 0 or errorList %}
    {% set resultsText = "Results for" %}
  {% else %}
    {% set resultsText = "We found no results for" %}
  {% endif %}

  <h1 class="govuk-heading-l govuk-!-margin-bottom-3">{{ resultsText }} ‘{{ searchString }}’</h1>

  <p>You can search by name and location.</p>

  <div class="govuk-grid-row">    
    <div class="govuk-grid-column-one-third">
      {{ searchForm({
        inputClass: "govuk-input",
        id: "results-search-input",
        name: "searchString",
        inputmode: "string",
        buttonText: "Search",
        href: "/results",
        labelHTML: "Search",
        value: searchString,
        errorList: errorList,
        hiddenInputs: hiddenInputs,
        filters: filters
      }) }}
    </div>

    <div class="govuk-grid-column-two-thirds">
      {{ searchResults({
        results: results,
        total: total,
        page: currentPage,
        searchString: searchString,
        sortBy: sortBy,
        tags: tags,
        downloadResultsLink: downloadResultsLink
      }) }}

      {{ govukPagination({
        previous: previous,
        next: next,
        landmarkLabel: 'Pagination Navigation'
      }) }}
    </div>
  </div>
{% endblock %}
